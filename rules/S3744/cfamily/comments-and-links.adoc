=== On 2016-10-12T17:42:06Z Jean-Christophe Collet Wrote:
\[~ann.campbell.2] insisted on removing the exception. Talk to her if you disagree.

=== On 2016-10-13T15:16:48Z Alban Auzeill Wrote:
By removing the exception we find issue like the following:

https://github.com/GNOME/glib/blob/f924d0b1f7d2b019f1abb56685dcfda74266c608/glib/gdatetime.c#L177

But it's a rare example.


\[~jeanchristophe.collet] I will show you issues in our ruling so we can decide what to do.

=== On 2016-10-13T15:25:09Z Jean-Christophe Collet Wrote:
That still looks like something that should be pointed out.

Either the 2nd definition is useless or the developer meant to write something else. Either way, that's a code smell to me.

Or did I miss something?

=== On 2016-10-13T16:06:38Z Alban Auzeill Wrote:
Yes the issue on GNOME looks like an unfortunate copy and past. I hope that the developer intention was not to declare something else.

This finding tipped the balance in favour of exception removal proposed by [~ann.campbell.2].


But [~massimo.paladin] argues than clang, gcc and visual studio only report issues on redefinition of macro with a different values, and ignore when the values are identical.

So [~massimo.paladin] suggest to do like compilers to not generate noise.


Note:

____
The C standard says (ISO/IEC 9899:1999, ยง6.10.3, 2):


An identifier currently defined as an object-like macro shall not be redefined by another

#define preprocessing directive unless the second definition is an object-like macro

definition and the two replacement lists are identical. Likewise, an identifier currently

defined as a function-like macro shall not be redefined by another #define

preprocessing directive unless the second definition is a function-like macro definition

that has the same number and spelling of parameters, and the two replacement lists are

identical.

____



=== Related: RSPEC-1703

=== On 2017-01-10T17:58:40Z Ann Campbell Wrote:
Note that this RSpec is an almost exact inverse of RSPEC-1703. The difference between them, and the reason to have both, is Oracle Forms. With Forms in play, RSPEC-1703 should be used. Without it/them, this is the rule that's preferred.

=== On 2017-01-19T11:15:39Z Pierre-Yves Nicolas Wrote:
\[~ann.campbell.2] I think that this rule would trigger a lot of noise if it's defined like that.

I think that using "%TYPE" and "%ROWTYPE" is not always possible. For example, if a variable is used as a counter, it would not refer to any column.

I would restrict that rule to cases where we are sure that the variable can be defined with "%TYPE" or "%ROWTYPE" and that probably requires SQL queries.

=== On 2017-01-19T12:31:28Z Pierre-Yves Nicolas Wrote:
\[~ann.campbell.2] Following my previous comment, I don't think we can raise issues on package specifications because we need to know how the variable is used. As a first step, maybe we should only target variables which are assigned in a ``++SELECT...INTO++``. Example:

----
CREATE FUNCTION func1(acc_no IN NUMBER) 
   RETURN NUMBER 
   IS total NUMBER(11,2); -- Noncompliant
   BEGIN 
      SELECT order_total 
      INTO total -- total is assigned here: it could be defined as orders.order_total%TYPE
      FROM orders 
      WHERE customer_id = acc_no; 
      RETURN(total); 
    END;
/
----

=== On 2017-01-23T09:29:22Z Ann Campbell Wrote:
\[~pierre-yves.nicolas] I've updated the title and the code samples. Please double-check that I've converted the Compliant Solution correctly

=== On 2017-01-23T09:34:38Z Pierre-Yves Nicolas Wrote:
\[~ann.campbell.2] Looks good to me.

